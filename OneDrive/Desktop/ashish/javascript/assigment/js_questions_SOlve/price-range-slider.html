<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</head>

<body>
    <h1 class="text-center mt-3">Custom Price Range Slider</h1>
    <div class="container text-center py-5">
        <div class="card w-50 text-center ms-auto me-auto border-0 shadow">
            <div class="card-wrap">
                <h2>Price Range Slider</h2>
                <div class="price-input">
                    <label for="min-price">Minimum Price</label>
                    <input type="number" id="min-price" class="min-input ps-2" value="2500">
                    <br><br>
                    <label for="max-price">Maximum Price</label>
                    <input type="number" id="max-price" class="max-input ps-2" value="8500">
                </div>
                <div class="slider-container">
                    <div class="price-slider"></div>
                    <div class="range-input mt-4">
                        <input type="range" class="min-range" min="0" max="10000" value="2500" step="1">
                        <input type="range" class="max-range" min="0" max="10000" value="8500" step="1">
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        const rangeValue = document.querySelector(".price-slider");
        const rangeInputs = document.querySelectorAll(".range-input input");
        const priceInputs = document.querySelectorAll(".price-input input");
        const priceGap = 500;

        // Update the input fields when price inputs change
        priceInputs.forEach((input, index) => {
            input.addEventListener("input", () => {
                let minPrice = parseInt(priceInputs[0].value);
                let maxPrice = parseInt(priceInputs[1].value);

                // Ensure minimum and maximum constraints
                if (minPrice < 0) minPrice = 0;
                if (maxPrice > 10000) maxPrice = 10000;

                if (maxPrice - minPrice < priceGap) {
                    if (index === 0) minPrice = maxPrice - priceGap;
                    else maxPrice = minPrice + priceGap;
                }

                priceInputs[0].value = minPrice;
                priceInputs[1].value = maxPrice;

                rangeInputs[0].value = minPrice;
                rangeInputs[1].value = maxPrice;

                updateSlider();
            });
        });

        // Update the slider when range inputs change
        rangeInputs.forEach((input, index) => {
            input.addEventListener("input", () => {
                let minPrice = parseInt(rangeInputs[0].value);
                let maxPrice = parseInt(rangeInputs[1].value);

                if (maxPrice - minPrice < priceGap) {
                    if (index === 0) rangeInputs[0].value = maxPrice - priceGap;
                    else rangeInputs[1].value = minPrice + priceGap;
                }

                priceInputs[0].value = rangeInputs[0].value;
                priceInputs[1].value = rangeInputs[1].value;

                updateSlider();
            });
        });

        // Function to update the slider's progress bar
        function updateSlider() {
            const min = parseInt(rangeInputs[0].value);
            const max = parseInt(rangeInputs[1].value);
            const rangeMax = parseInt(rangeInputs[0].max);

            rangeValue.style.left = (min / rangeMax) * 100 + "%";
            rangeValue.style.right = 100 - (max / rangeMax) * 100 + "%";
        }

        updateSlider();

    </script>
</body>

</html>